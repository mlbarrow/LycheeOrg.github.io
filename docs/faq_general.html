<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Lychee Documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <link rel="canonical" href="https://lycheeorg.github.io/docs/">

    <!-- Favicon -->
    <!-- <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-touch-icon.png"> -->
    <link rel="icon" type="image/png" href="/assets/images/logo.png">
    <!-- <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon/favicon-32x32.png"> -->
    <!-- <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon/favicon-16x16.png"> -->
    <!-- <link rel="manifest" href="/img/favicon/site.webmanifest"> -->
    <!-- <link rel="mask-icon" href="/img/favicon/safari-pinned-tab.svg" color="#ff2d20"> -->
    <!-- <link rel="shortcut icon" href="/img/favicon/favicon.ico"> -->
    <meta name="msapplication-TileColor" content="#ff2d20">
    <!-- <meta name="msapplication-config" content="/img/favicon/browserconfig.xml"> -->
    <meta name="theme-color" content="#ffffff">

    <!-- Load styles -->
    <link rel="stylesheet" type="text/css" href="css/app.css">
    <link rel="stylesheet" type="text/css" href="css/prism.css">

    <!-- Load JS -->
    <script src="js/vendor/jquery.js"></script>
    <script src="js/vendor/prism.js"></script>

</head>

<body>

    <div class="sidebar_layout" id="docsScreen">

        <div class="page_contain">
            <div class="contain">
                <aside class="sidebar">
                    <a href="../" class="logo">
                        <img class="mark" src="/assets/images/logo.png" alt="Laravel">
                        <img class="type" src="img/Lychee.png" alt="Laravel">
                    </a>
                    <nav>
                        <div class="navigation_contain">
                            <div class="docs_sidebar">
                                <ul>
                                    <li class='sub--on'>
<h2>Prologue</h2>
<ul>
<li><a href='org.html'>Lychee & LycheeOrg</a></li>
<li><a href='releases.html'>Release Notes</a></li>
</ul>
<li class='sub--on'>
<h2>Getting Started</h2>
<ul>
<li><a href='installation.html'>Installation</a></li>
<li><a href='configuration.html'>Configuration</a></li>
<li><a href='docker.html'>Docker</a></li>
<li><a href='update.html'>Update</a></li>
<li><a href='upgrade.html'>Upgrade from v3</a></li>
</ul>
<li class='sub--on'>
<h2>Advanced Topics</h2>
<ul>
<li><a href='settings.html'>Settings</a></li>
<li><a href='keyboard.html'>Keyboard Shortcuts</a></li>
<li><a href='advanced-setups.html'>Advanced Setups</a></li>
</ul>
<li class='sub--on'>
<h2>Frequently Asked Question</h2>
<ul>
<li class='active'><a href='faq_general.html'>General</a></li>
<li><a href='faq_installation.html'>Installation, migration, upgrade, update</a></li>
<li><a href='faq_troubleshooting.html'>Troubleshooting</a></li>
</ul>
<li class='sub--on'>
<h2>Contributing</h2>
<ul>
<li><a href='contributions.html'>Contribution Guide</a></li>
<li><a href='api.html'>API Documentation</a></li>
<li><a href='architecture.html'>Lychee logic overview</a></li>
<li><a href='structure.html'>Directory Structure</a></li>
<li><a href='frontend.html'>Front-end</a></li>
<li><a href='livewire.html'>Livewire Front-end (alpha)</a></li>
</ul>

                                    <li class="laravel">
                                        <a href="https://laravel.com/docs/8.x"><h2>Laravel<img style="margin-left:4px;" src="img/external-link.svg" /></h2></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </nav>
                    <div class="trigger_contain">
                        <a href="#" class="nav_trigger" aria-label="Menu">
                            <div class="bar"></div>
                        </a>
                    </div>
                </aside>

                <section class="body_content">
                    <section class="docs_body">
                        <section class="docs_main">
                            <h1>General</h1>
                            
<ul>
<li><a href="#which-browsers-are-supported">Which browsers are supported?</a></li>
<li><a href="#which-file-formats-are-supported">Which file formats are supported?</a></li>
<li><a href="#what-is-new">What is new?</a></li>
<li><a href="#how-can-i-easily-contact-the-lycheeorg-organization">How can I easily contact the LycheeOrg organization?</a></li>
<li><a href="#how-can-i-set-thumbnails-for-my-albums">How can I set thumbnails for my albums?</a></li>
<li><a href="#is-it-possible-to-create-folders-inside-another-folder-if-so-how-to-do-that">Is it possible to create folders inside another folder? If so, how to do that?</a></li>
<li><a href="#what-headers-need-to-be-used-to-authenticate-with-the-custom-api_key-in-the-settings">What headers need to be used to authenticate with the custom api_key in the settings?</a></li>
<li><a href="#can-i-use-my-existing-folder-structure">Can I use my existing folder structure?</a></li>
<li><a href="#can-i-upload-videos">Can I upload videos?</a></li>
<li><a href="#is-it-possible-to-create-multiple-users">Is it possible to create multiple users?</a></li>
<li><a href="#does-lychee-use-imagemagick">Does Lychee use ImageMagick?</a></li>
<li><a href="#how-to-change-the-title-of-the-site">How to change the title of the site?</a></li>
<li><a href="#how-to-reset-username-and-password">How to reset username and password?</a></li>
<li><a href="#how-to-hide-smart-albums">How to hide smart albums?</a></li>
<li><a href="#how-to-disable-the-zoom-animation-while-browsing-pictures">How to disable the 'zoom' animation while browsing pictures?</a></li>
<li><a href="#how-to-use-a-custom-font-on-the-landing-page">How to use a custom font on the landing page?</a></li>
<li><a href="#how-to-add-custom-scripts">How to add custom scripts?</a></li>
<li><a href="#how-is-the-upload-folder-protected">How is the upload folder protected?</a></li>
<li><a href="#my-login-is-timing-out-after-two-hours-how-can-this-be-changed">My login is timing out after two hours, how can this be changed?</a></li>
<li><a href="#how-can-i-clear-the-logs">How can I clear the Logs?</a></li>
<li><a href="#how-can-i-see-the-correct-client-ip-address-when-running-lychee-behind-cloudflare">How can I see the correct client IP address when running Lychee behind Cloudflare?</a></li>
<li><a href="#can-i-set-up-lychee-to-watch-a-folder-for-new-images-and-automatically-add-them-to-albums">Can I set up Lychee to watch a folder for new images and automatically add them to albums?</a></li>
<li><a href="#special-right-click-menu-doesnt-appear-for-new-users">Special right-click menu doesn't appear for new users?</a></li>
<li><a href="#the-divider-h1-shows-the-text-admin-when-logged-in-with-an-ordinary-user-shoulnt-this-be-albums">The divider h1 shows the text "Admin" when logged in with an ordinary user. Shouln't this be "Albums"?</a></li>
</ul>

                            <hr> <h3 id="which-browsers-are-supported"><a class="toclink" href="#which-browsers-are-supported">Which browsers are supported?</a></h3>
<p>Lychee should work with any modern, standards-compliant web browser (note that having JavaScript enabled is a hard dependency). Lychee does take advantage of several HTML5 features, such as the <code>&lt;video&gt;</code> tag, responsive image sizing using <code>srcset</code>, or link data prefetching. In particular, Lychee supports the latest versions of Google Chrome, Apple's Safari, Mozilla Firefox, Opera, and Microsoft Internet Explorer.</p>
<p>If you experience any issues with Lychee and wish to report it, make sure to specify the browser you're using and the version of it.</p>
<h3 id="which-file-formats-are-supported"><a class="toclink" href="#which-file-formats-are-supported">Which file formats are supported?</a></h3>
<p>Lychee supports major image formats, and since version 3.2.1 some video formats as well. Specifically, <code>*.jpg</code>, <code>*.jpeg</code>, <code>*.png</code>, <code>*.gif</code>, <code>*.webp</code>, <code>*.ogv</code>, <code>*.mp4</code>, <code>*.mpg</code>, <code>*.webm</code>, <code>*.mov</code>, <code>*.m4v</code>, <code>*.avi</code> and <code>*.wmv</code> are accepted.</p>
<p>If you're uploading video files, make sure to increase your upload limits in <code>php.ini</code>.  See the <a href="installation.html">Installation</a> section for more information.</p>
<h3 id="what-is-new"><a class="toclink" href="#what-is-new">What is new?</a></h3>
<p>Take a look at the <a href="releases.html">Release Notes</a> to see what's new.</p>
<h3 id="how-can-i-easily-contact-the-lycheeorg-organization"><a class="toclink" href="#how-can-i-easily-contact-the-lycheeorg-organization">How can I easily contact the LycheeOrg organization?</a></h3>
<p>There is a Gitter associated with the project, feel free to join us there: https://gitter.im/LycheeOrg/Lobby</p>
<h3 id="how-can-i-set-thumbnails-for-my-albums"><a class="toclink" href="#how-can-i-set-thumbnails-for-my-albums">How can I set thumbnails for my albums?</a></h3>
<p>Thumbnails are selected automatically from the photos inside the album (and any subalbums) based on the photo sorting order specified in the <a href="settings.html#sorting">Settings</a>. <em>Precedence is given to starred photos</em>. In practical terms, if only one photo inside an album is starred, that photo is guaranteed to be the top thumbnail.</p>
<h3 id="is-it-possible-to-create-folders-inside-another-folder-if-so-how-to-do-that"><a class="toclink" href="#is-it-possible-to-create-folders-inside-another-folder-if-so-how-to-do-that">Is it possible to create folders inside another folder? If so, how to do that?</a></h3>
<p>Either press <code>n</code> (as <strong>N</strong>ew) or use the add menu.</p>
<p><img alt="Screenshot" src="img/create-album.png" /></p>
<h3 id="what-headers-need-to-be-used-to-authenticate-with-the-custom-api_key-in-the-settings"><a class="toclink" href="#what-headers-need-to-be-used-to-authenticate-with-the-custom-api_key-in-the-settings">What headers need to be used to authenticate with the custom <code>api_key</code> in the settings?</a></h3>
<p>In order to bypass the CSRF protection, you can set up the <code>api_key</code> setting to a secret value and send that value over in the <code>Authorization</code> header.<br />
Note that <code>api_key</code> only disables the CSRF protection, you still need to authenticate to the server.</p>
<p>In order to authenticate, use <a href="https://lycheeorg.github.io/docs/api.html#apisessionlogin">Session::login</a> and pass the returned <code>lychee_session</code> cookie to all subsequent requests.</p>
<p>The related code is available <a href="https://github.com/LycheeOrg/Lychee/blob/master/app/Http/Middleware/VerifyCsrfToken.php#L55">here</a></p>
<h3 id="can-i-use-my-existing-folder-structure"><a class="toclink" href="#can-i-use-my-existing-folder-structure">Can I use my existing folder structure?</a></h3>
<p>Not at this time. Lychee currently uses its own folder structure and database. Please upload or import all your photos to use them.</p>
<h3 id="can-i-upload-videos"><a class="toclink" href="#can-i-upload-videos">Can I upload videos?</a></h3>
<p>Yes, but you may need to change this property to a bigger value:</p>
<pre><code class="language-ini">upload_max_filesize = 100M
</code></pre>
<h3 id="is-it-possible-to-create-multiple-users"><a class="toclink" href="#is-it-possible-to-create-multiple-users">Is it possible to create multiple users?</a></h3>
<p>Yes. Just go to the <code>Users</code> menu.</p>
<h3 id="does-lychee-use-imagemagick"><a class="toclink" href="#does-lychee-use-imagemagick">Does Lychee use ImageMagick?</a></h3>
<p>Yes. Lychee uses ImageMagick when available.</p>
<h3 id="how-to-change-the-title-of-the-site"><a class="toclink" href="#how-to-change-the-title-of-the-site">How to change the title of the site?</a></h3>
<p>Go to the advanced Settings menu and change the value of <code>site_title</code>.</p>
<h3 id="how-to-reset-username-and-password"><a class="toclink" href="#how-to-reset-username-and-password">How to reset username and password?</a></h3>
<p>Via SSH, use the command <code>php artisan lychee:reset_admin</code>.</p>
<h3 id="how-to-hide-smart-albums"><a class="toclink" href="#how-to-hide-smart-albums">How to hide smart albums?</a></h3>
<p>Add the following custom CSS to your <code>user.css</code> or via the settings menu:</p>
<pre><code class="language-css">[data-id=&quot;unsorted&quot;] { display:none; }
[data-id=&quot;public&quot;] { display:none; }
[data-id=&quot;starred&quot;] { display:none; }
[data-id=&quot;recent&quot;] { display:none; }
div#lychee_view_content &gt; div.divider:first-child { display:none; }
div#lychee_view_content &gt; div.divider:nth-child(6) {
    margin-top: 10px;
    border-top: 0;
    box-shadow: none;
}
</code></pre>
<h3 id="how-to-disable-the-zoom-animation-while-browsing-pictures"><a class="toclink" href="#how-to-disable-the-zoom-animation-while-browsing-pictures">How to disable the 'zoom' animation while browsing pictures?</a></h3>
<p>Add the following custom CSS to your <code>user.css</code> or via the settings menu:</p>
<pre><code class="language-css">#imageview #image {
  transition: none !important;
  animation-name: none !important;
  animation-duration: 0 !important;
}
</code></pre>
<h3 id="how-to-use-a-custom-font-on-the-landing-page"><a class="toclink" href="#how-to-use-a-custom-font-on-the-landing-page">How to use a custom font on the landing page?</a></h3>
<p>In order to use a specific font on the landing page which does not rely on some font provided by the client-side browser, you have two options:</p>
<ol>
<li>self-host the necessary set of font files as part of your Lychee installation</li>
<li>use an external font-hosting service such as Google Fonts</li>
</ol>
<p>Both options require to tweak the custom <code>user.css</code> via the settings menu.</p>
<h4 id="option-1-self-hosted-font-files"><a class="toclink" href="#option-1-self-hosted-font-files">Option 1: Self-hosted font files</a></h4>
<p>Let's assume that your favorite font is called <code>My Font</code>. You need a set of the font files in WOFF2 format with one font file per used font weight and style. The landing page uses 5 different font weights (200 = thin, 300 = light, 400 = normal, 500 = thick, 700 = bold) all in normal (i.e. upright) style.</p>
<p>The necessary CSS consists of two parts: firstly, the font face and its different weights are declared via the <code>@font-face</code>-directive; secondly, the declared font needs to be used by the styles for the page. A template CSS code for <code>user.css</code> looks like this.</p>
<pre><code class="language-css">@font-face {
    font-family: &quot;My Font&quot;;
    font-style: normal;
    font-weight: 200;
    src: local(&quot;&quot;), url(&quot;&lt;font URL for weight 200&gt;&quot;) format(&quot;woff2&quot;);
}
@font-face {
    font-family: &quot;My Font&quot;;
    font-style: normal;
    font-weight: 300;
    src: local(&quot;&quot;), url(&quot;&lt;font URL for weight 300&gt;&quot;) format(&quot;woff2&quot;);
}
@font-face {
    font-family: &quot;My Font&quot;;
    font-style: normal;
    font-weight: 400;
    src: local(&quot;&quot;), url(&quot;&lt;font URL for weight 400&gt;&quot;) format(&quot;woff2&quot;);
}
@font-face {
    font-family: &quot;My Font&quot;;
    font-style: normal;
    font-weight: 500;
    src: local(&quot;&quot;), url(&quot;&lt;font URL for weight 500&gt;&quot;) format(&quot;woff2&quot;);
}
@font-face {
    font-family: &quot;My Font&quot;;
    font-style: normal;
    font-weight: 700;
    src: local(&quot;&quot;), url(&quot;&lt;font URL for weight 700&gt;&quot;) format(&quot;woff2&quot;);
}

#logo h1 span,
#logo h1,
#intro,
.menu .menu-item {
    font-family: &quot;My Font&quot;, sans-serif !important;
}
</code></pre>
<h4 id="option-2-using-an-external-font-hosting-service"><a class="toclink" href="#option-2-using-an-external-font-hosting-service">Option 2: Using an external font-hosting service</a></h4>
<p>If you want to use an external font-hosting service, replace the <code>@font-face</code> blocks of the template above with an <code>@import</code>-directive which points to the externally hosted font. The name of the font-family must be replaced by the font name as documented by the external font-service.
For example, let's assume you want use Google's Nunito font. Then the CSS has to look like</p>
<pre><code class="language-css">@import url(&quot;https://fonts.googleapis.com/css?family=Nunito:200,300,400,500,700&quot;);
#logo h1 span,
#logo h1,
#intro,
.menu .menu-item {
    font-family: &quot;Nunito&quot;, sans-serif !important;
}
</code></pre>
<p>You also have to change the CSP (Content Security Policy) to allow loading fonts from the external server. Therefore, add the following to the <code>csp</code> array in <code>config/secure-headers.php</code> (for example, below the <code>sandbox</code> line, one of the last lines in this file):</p>
<pre><code class="language-php">        'style-src' =&gt; [
            'allow' =&gt; [
                'https://fonts.googleapis.com',
            ],
            'nonces' =&gt; [],
            'self' =&gt; true,
            'unsafe-inline' =&gt; true,
            'report-sample' =&gt; true,
            'add-generated-nonce' =&gt; false,
        ],
        'font-src' =&gt; [
            'allow' =&gt; [
                'https://fonts.gstatic.com',
            ],
            'self' =&gt; true,
        ],
</code></pre>
<p>Change the URLs <code>https://fonts.googleapis.com</code> and <code>https://fonts.gstatic.com</code> to match your provider's URLs.</p>
<h3 id="how-to-add-custom-scripts"><a class="toclink" href="#how-to-add-custom-scripts">How to add custom scripts?</a></h3>
<p>If you want to add custom scripts, for example to add an analytics service, you can add the script code to the <code>additional_footer_text</code> setting. For example, adding <code>&lt;script&gt;alert('Hello World!');&lt;/script&gt;</code> to it will display an alert dialog with <code>Hello World!</code> in it every time you load the page.</p>
<h3 id="how-is-the-upload-folder-protected"><a class="toclink" href="#how-is-the-upload-folder-protected">How is the upload folder protected?</a></h3>
<p>From <a href="https://github.com/LycheeOrg/Lychee/issues/304">#304</a></p>
<p>Short version: It's not protected</p>
<p>Long answer: <a href="https://github.com/LycheeOrg/Lychee/pull/295">#295</a> added some protection through symlinking, so that the URLs used are temporary.</p>
<p>Right now, the protection is basically through the use of difficult to guess names (it's an MD5 checksum of the system time at the time of upload). <a href="https://github.com/LycheeOrg/Lychee/pull/295">#295</a> not only made those names temporary (this needs to be enabled in the Settings, BTW) but it also provided optional support for hiding the full-size version (this is only effective with symlinking as without it the URL can be derived from that of intermediate-size images).</p>
<p><a href="https://github.com/ildyria">@ildyria</a> recently posted the following link on how a more effective protection could be implemented: https://bedigit.com/blog/laravel-5-how-to-access-image-uploaded-in-storage-within-view/. He didn't go down that route himself due to performance concerns but we agree that if somebody contributed a clean implementation as an option, we'd probably accept it.</p>
<h3 id="my-login-is-timing-out-after-two-hours-how-can-this-be-changed"><a class="toclink" href="#my-login-is-timing-out-after-two-hours-how-can-this-be-changed">My login is timing out after two hours, how can this be changed?</a></h3>
<p>You can edit your <code>.env</code> and modify the <code>SESSION_LIFETIME=120</code> part (in minutes).</p>
<h3 id="how-can-i-clear-the-logs"><a class="toclink" href="#how-can-i-clear-the-logs">How can I clear the Logs?</a></h3>
<p>To remove the <code>Notice</code> and <code>Warnings</code>, simply click on the button at the top of the Log page.
However if the page is too heavy to load, you can either manually empty the <code>Logs</code> table or use artisan:</p>
<pre><code class="language-bash">cd Lychee
php artisan lychee:logs clean
</code></pre>
<h3 id="how-can-i-see-the-correct-client-ip-address-when-running-lychee-behind-cloudflare"><a class="toclink" href="#how-can-i-see-the-correct-client-ip-address-when-running-lychee-behind-cloudflare">How can I see the correct client IP address when running Lychee behind Cloudflare?</a></h3>
<p>Please see <a href="https://github.com/monicahq/laravel-cloudflare">https://github.com/monicahq/laravel-cloudflare</a>. The Lychee file that needs changing can be found <a href="https://github.com/LycheeOrg/Lychee/blob/master/app/Http/Middleware/TrustProxies.php">here</a>.</p>
<h3 id="can-i-set-up-lychee-to-watch-a-folder-for-new-images-and-automatically-add-them-to-albums"><a class="toclink" href="#can-i-set-up-lychee-to-watch-a-folder-for-new-images-and-automatically-add-them-to-albums">Can I set up Lychee to watch a folder for new images and automatically add them to albums?</a></h3>
<p>Lychee can import photos from the command line using <code>php artisan lychee:sync /path/to/import</code>. Folders in this path will be converted to albums, and subfolders as subalbums using <code>php artisan lychee:sync /path/to/import --album_id="album ID"</code>.</p>
<p>This command can be scheduled using <code>cron</code> or a systemd timer.</p>
<pre><code class="language-bash">man crontab
man systemd.timer
</code></pre>
<h3 id="special-right-click-menu-doesnt-appear-for-new-users"><a class="toclink" href="#special-right-click-menu-doesnt-appear-for-new-users">Special right-click menu doesn't appear for new users?</a></h3>
<p>For example:<br />
<img alt="" src="img/special-right-click-missing.png" /></p>
<p>No this is normal. This user does not have the ownership of that Album, so the right click is not available. You can see <em>sharing</em> as a <em>read</em> permission.</p>
<h3 id="the-divider-h1-shows-the-text-admin-when-logged-in-with-an-ordinary-user-shoulnt-this-be-albums"><a class="toclink" href="#the-divider-h1-shows-the-text-admin-when-logged-in-with-an-ordinary-user-shoulnt-this-be-albums">The divider h1 shows the text "Admin" when logged in with an ordinary user. Shouln't this be "Albums"?</a></h3>
<!-- TODO add deprecation notice once https://github.com/LycheeOrg/Lychee/pull/1539 is merged
> {note} This is a behavior of Lychee that only occurs if the admin user did not log in after the update. Please contact the admin to log in once. After this, the admin's username is shown instead of `Admin`.
-->

<p>Actually no, this is because the user does not have any albums (yet). The <code>h1</code> divider is to show who is the owner of those albums. See bellow.
<img alt="2020-02-19_3840x1080_12:29:19" src="https://user-images.githubusercontent.com/627094/74830496-92c3a200-5313-11ea-9065-60cb8090c7ac.png" />
And yes the right-click menu is available on the <em>PhD Defenses</em> part but not in the <em>Admin</em> parts.
Also because this user has upload right, he can see the <em>Unsorted, Public, Starred, Recent</em> smart albums.</p><blockquote><p>{tip} Caught a mistake or want to contribute to the documentation?&nbsp;<a href="https://github.com/LycheeOrg/LycheeOrg.github.io/tree/master/docs/faq_general.md">Edit this page on Github!</a></p></blockquote>
                        </section>
                    </section>
                </section>
            </div>
        </div>

    </div>
</body>
<script src="js/app.js"></script>

</html>
